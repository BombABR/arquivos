<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="robots" content="noindex">
<title>Player</title>
<script src="https://cdn.jsdelivr.net/npm/clappr@0.3.4/dist/clappr.min.js"></script>
<style>
#player {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
}
</style>
</head>
<body>
<div id="player"></div>
<script>
var xhr = new XMLHttpRequest();

xhr.open("POST", "https://tlienogeg5.execute-api.us-west-2.amazonaws.com/qa", true);
xhr.setRequestHeader("x-api-key", "s3yVaHkSVwaq58B5wnUNx27XEah4WpVR3lMonSib");
xhr.send(JSON.stringify({token_type: "live_token"}));

xhr.onreadystatechange = function() {
    if (xhr.readyState == XMLHttpRequest.DONE) {
        var resultado = JSON.parse(xhr.response);
        var token = resultado.body.auth.token;
        var player = new Clappr.Player({
            source: "https://latam2-lh.akamaihd.net/i/CTN_BRA@445596/master.m3u8?hdnea=" + token,
            poster: "https://3.bp.blogspot.com/-D2pqG_yTfs8/W8UQSJ93iJI/AAAAAAAAFg4/rMn007hmvsApkNmbe7Hx9cEM-Y-cROsggCLcBGAs/s1600/cn-aovivo.png",
            autoPlay: true,
            height: "100%",
            width: "100%",
            parentId: "#player",
            hlsjsConfig: {
                xhrSetup: function(xhr) {
                    xhr.setRequestHeader("X-Forwarded-For", "187.20.0.0");
                }
            }
        });
    };
};
</script>
</body>
</html>
